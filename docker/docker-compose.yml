version: '2'
services:
  e1:
    image: elasticsearch:2.3.5
    volumes:
      - ./e1/config/:/usr/share/elasticsearch/config/
    ports: 
      - '9201:9200'
    network_mode: "default"

  e2:
    image: elasticsearch:2.3.5
    volumes:
      - ./e2/config/:/usr/share/elasticsearch/config/
    ports: 
      - '9202:9200'
    network_mode: "host"
    links:
      - e1

  e3:
    image: elasticsearch:2.3.5
    volumes:
      - ./e3/config/:/usr/share/elasticsearch/config/
    ports: 
      - '9203:9200'
    network_mode: "host"
    links:
      - e1

  kopf:
    image: lmenezes/elasticsearch-kopf:1.4.2
    ports:
      - 8080:80
    environment:
      - KOPF_SERVER_NAME=kopf
      - KOPF_ES_SERVERS=10.100.199.200:9201
    network_mode: "host"